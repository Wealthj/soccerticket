[{"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\index.js":"1","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\App.js":"2","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\reportWebVitals.js":"3","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\Navbar.js":"4","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\CreateTickets.js":"5","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\Tickets.js":"6"},{"size":480,"mtime":1645619425382,"results":"7","hashOfConfig":"8"},{"size":4523,"mtime":1664639928622,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":1645619164806,"results":"10","hashOfConfig":"8"},{"size":846,"mtime":1664351224675,"results":"11","hashOfConfig":"8"},{"size":1422,"mtime":1664351138751,"results":"12","hashOfConfig":"8"},{"size":2179,"mtime":1664640546279,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"u1p1oz",{"filePath":"17","messages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"16"},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\index.js",[],["28","29"],"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\App.js",["30","31"],"import \"./App.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport Ticket from \"./contract/Ticket.abi.json\";\r\nimport CreateTickets from \"./components/CreateTickets\";\r\nimport Tickets from \"./components/Tickets\";\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\nconst contractAddress = \"0xDAdE3A9E28Ee7a5EE8628F291cB4146f14F88a85\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\nfunction App() {\r\n\tconst [contract, setcontract] = useState(null);\r\n\tconst [address, setAddress] = useState(null);\r\n\tconst [kit, setKit] = useState(null);\r\n\tconst [cUSDBalance, setcUSDBalance] = useState(0);\r\n\tconst [tickets, setTickets] = useState([]);\r\n\r\n\tconst connectToWallet = async () => {\r\n\t\tif (window.celo) {\r\n\t\t\ttry {\r\n\t\t\t\tawait window.celo.enable();\r\n\t\t\t\tconst web3 = new Web3(window.celo);\r\n\t\t\t\tlet kit = newKitFromWeb3(web3);\r\n\r\n\t\t\t\tconst accounts = await kit.web3.eth.getAccounts();\r\n\t\t\t\tconst user_address = accounts[0];\r\n\r\n\t\t\t\tkit.defaultAccount = user_address;\r\n\r\n\t\t\t\tawait setAddress(user_address);\r\n\t\t\t\tawait setKit(kit);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Error Occurred\");\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconnectToWallet();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (kit && address) {\r\n\t\t\tgetBalance();\r\n\t\t}\r\n\t}, [kit, address]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contract) {\r\n\t\t\tgetTickets();\r\n\t\t}\r\n\t}, [contract]);\r\n\r\n\tconst getBalance = async () => {\r\n\t\ttry {\r\n\t\t\tconst balance = await kit.getTotalBalance(address);\r\n\t\t\tconst USDBalance = balance.cUSD\r\n\t\t\t\t.shiftedBy(-ERC20_DECIMALS)\r\n\t\t\t\t.toFixed(2);\r\n\t\t\tconst contract = new kit.web3.eth.Contract(\r\n\t\t\t\tTicket,\r\n\t\t\t\tcontractAddress\r\n\t\t\t);\r\n\t\t\tsetcontract(contract);\r\n\t\t\tsetcUSDBalance(USDBalance);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getTickets = async () => {\r\n\t\tconst ticketsLength = await contract.methods.getticketsLength().call();\r\n\t\tconsole.log(ticketsLength);\r\n\t\tconst _tickk = [];\r\n\t\tfor (let index = 0; index < ticketsLength; index++) {\r\n\t\t\tlet _tickets = new Promise(async (resolve, reject) => {\r\n\t\t\t\tlet ticket = await contract.methods.getTicket(index).call();\r\n\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\towner: ticket[0],\r\n\t\t\t\t\timage: ticket[1],\r\n\t\t\t\t\tfixture: ticket[2],\r\n\t\t\t\t\tvenue: ticket[3],\r\n\t\t\t\t\tprice: ticket[4],\r\n\t\t\t\t\tforSale: ticket[5]\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t_tickk.push(_tickets);\r\n\t\t}\r\n\t\tconst _tickets = await Promise.all(_tickk);\r\n\t\tsetTickets(_tickets);\r\n\t\t\r\n\t};\r\n\r\n\tconst CreateTicket = async (_image, _fixture, _venue, price) => {\r\n\t\tconst _price = new BigNumber(price)\r\n\t\t\t.shiftedBy(ERC20_DECIMALS)\r\n\t\t\t.toString();\r\n\t\ttry {\r\n\t\t\tawait contract.methods\r\n\t\t\t\t.newTicket(_image, _fixture, _venue, _price)\r\n\t\t\t\t.send({ from: address });\r\n\t\t\tgetTickets();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\tconst UpdateTicketPrice = async (_index, _newPrice) => {\r\n\t\tconst newPrice = new BigNumber(_newPrice).shiftedBy(ERC20_DECIMALS).toString();\r\n\t\tconsole.log(_index);\r\n\r\n\t\t\r\n\t\ttry {\r\n\t\t  await contract.methods.updateTicketCost(_index, newPrice).send({ from: address });\r\n\t\t  getTickets();\r\n\t\t  getBalance();\r\n\t\t} catch (error) {\r\n\t\t console.log(error);\r\n\t\t alert(\"The Ticket price has succesfully been updated\")\r\n\t\t}};\r\n\t  \r\n\t\tconst toggleSaleStatus = async (_index) => {\r\n\t\t\ttry {\r\n\t\t\t  await contract.methods.toggleSaleStatus(_index).send({ from: address });\r\n\t\t\t  getTickets();\r\n\t\t\t  getBalance();\r\n\t\t\t} catch (error) {\r\n\t\t\t  console.log(error);\r\n\t\t\t}};\r\n\t\t\r\n\r\n\t \r\n \r\n\tconst buyTicket = async (_index) => {\r\n\t\ttry {\r\n\t\t\tconst cUSDContract = new kit.web3.eth.Contract(\r\n\t\t\t\tIERC,\r\n\t\t\t\tcUSDContractAddress\r\n\t\t\t);\r\n\r\n\t\t\tawait cUSDContract.methods\r\n\t\t\t\t.approve(contractAddress, tickets[_index].price)\r\n\t\t\t\t.send({ from: address });\r\n\t\t\tawait contract.methods.buyTicket(_index).send({ from: address });\r\n\t\t\tgetTickets();\r\n\t\t\tgetBalance();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t{address && kit ? (\r\n\t\t\t<div>\r\n\t\t\t\t<Navbar balance={cUSDBalance} />\r\n\r\n\t\t\t\t<Tickets\r\n\t\t\t\t\ttickets={tickets}\r\n\t\t\t\t\tbuyTicket={buyTicket}\r\n\t\t\t\t\ttoggleSaleStatus={toggleSaleStatus}\r\n\t\t\t\t\tUpdateTicketPrice={UpdateTicketPrice}\r\n\t\t\t\t\taddress={address}\r\n\t\t\t\t/>\r\n\t\t\t\t<CreateTickets CreateTicket={CreateTicket} />\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t\"\"\r\n\t\t)}\r\n\t</>\r\n);\r\n}\r\n\r\nexport default App;","C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\CreateTickets.js",[],"C:\\Users\\OGOYI\\Desktop\\soccerticket\\src\\components\\Tickets.js",["32"],{"ruleId":"33","replacedBy":"34"},{"ruleId":"35","replacedBy":"36"},{"ruleId":"37","severity":1,"message":"38","line":56,"column":5,"nodeType":"39","endLine":56,"endColumn":19,"suggestions":"40"},{"ruleId":"37","severity":1,"message":"41","line":62,"column":5,"nodeType":"39","endLine":62,"endColumn":15,"suggestions":"42"},{"ruleId":"43","severity":1,"message":"44","line":6,"column":8,"nodeType":"45","messageId":"46","endLine":6,"endColumn":21},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["49"],"React Hook useEffect has a missing dependency: 'getTickets'. Either include it or remove the dependency array.",["50"],"no-unused-vars","'submitHandler' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"51","fix":"52"},{"desc":"53","fix":"54"},"Update the dependencies array to be: [kit, address, getBalance]",{"range":"55","text":"56"},"Update the dependencies array to be: [contract, getTickets]",{"range":"57","text":"58"},[1536,1550],"[kit, address, getBalance]",[1622,1632],"[contract, getTickets]"]